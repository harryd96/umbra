function ProspectsDeck({ prospects, onPromote, onRemove }) {
  const [index, setIndex] = React.useState(0);
  const [extraNote, setExtraNote] = React.useState("");

  React.useEffect(() => { setExtraNote(""); }, [index]);

  if (prospects.length === 0) {
    return <div className="mt-4 border rounded-xl p-4 text-gray-500 text-sm">No prospects queued.</div>;
  }

  const current = prospects[index];
  const nextProspect = () => setIndex((i) => (i + 1) % prospects.length);
  const prevProspect = () => setIndex((i) => (i - 1 + prospects.length) % prospects.length);

  return (
    <div className="relative mt-4 border rounded-xl p-4 min-h-[300px] flex flex-col justify-between">
      <div>
        <div className="flex items-center justify-between mb-2">
          <h3 className="font-semibold">Prospect</h3>
          <span className="text-xs text-gray-500">{prospects.length} queued</span>
        </div>

        <div className="text-sm">
          <div><span className="font-medium">Name:</span> {current.name || "(No name)"}</div>
          <div><span className="font-medium">Number:</span> <a href={`tel:${current.number}`} className="text-blue-600 underline">{current.number || "(No number)"}</a></div>
          {current.notes && <div className="mt-1 whitespace-pre-wrap">{current.notes}</div>}
        </div>

        <textarea
          value={extraNote}
          onChange={(e) => setExtraNote(e.target.value)}
          placeholder="Additional note"
          className="mt-3 w-full h-20 border rounded-xl px-3 py-2"
        />

        <div className="mt-3 flex gap-2">
          <button
            className="inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-green-600 text-white"
            onClick={() => onPromote(current, extraNote)}
          >✓</button>
          <button
            className="px-3 py-2 rounded-xl border"
            onClick={() => onRemove(current.id)}
          >Remove</button>
        </div>
      </div>

      {/* PERMANENT ARROW CONTROLS IN BOTTOM-RIGHT CORNER */}
      <div style={{
        position: 'absolute',
        bottom: '12px',
        right: '16px',
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        background: 'white',
        padding: '6px 10px',
        borderRadius: '12px',
        boxShadow: '0 1px 3px rgba(0,0,0,0.2)',
        zIndex: 50,
      }}>
        <button
          onClick={prevProspect}
          style={{
            border: '1px solid #ccc',
            borderRadius: '50%',
            width: '32px',
            height: '32px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            cursor: 'pointer',
          }}
        >←</button>
        <span style={{ fontWeight: 600 }}>{index + 1} / {prospects.length}</span>
        <button
          onClick={nextProspect}
          style={{
            border: '1px solid #ccc',
            borderRadius: '50%',
            width: '32px',
            height: '32px',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            cursor: 'pointer',
          }}
        >→</button>
      </div>
    </div>
  );
}
